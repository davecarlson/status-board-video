<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.1.4.min.js"></script>
<script>
function getPrice(symbol){

  query = "https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22"+symbol+"%22)&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=";
  $.getJSON(query, function(data){
	   price = data.query.results.quote;
 	    console.log(data.query.results.quote);

	    $("tr[data-stock='"+symbol+"'] .name").html(price.symbol);
	    $("tr[data-stock='"+symbol+"'] .price").html(price.LastTradePriceOnly);
	    $("tr[data-stock='"+symbol+"'] .change").html(price.PercentChange);
  });


}
$(document).ready(function(){

  $("#stocks tr[data-stock]").each(function(index) {
     getPrice($(this).data('stock'));
  });

});
</script>

<table id="stocks">
	<tr>
		<th width="50%" class="name">Stock</th>
		<th class="price">Price</th>
		<th class="change">Change</th>
	</tr>
	<tr data-stock="MPM.L" id="mpm">
		<td class="name"></td>
		<td class="price"></td>
		<td class="change"></td>
	</tr>
  <tr data-stock="CXENSE.OL" id="cx">
		<td class="name"></td>
		<td class="price"></td>
		<td class="change"></td>
	</tr>
  <tr id="sln">
		<td class="name"></td>
		<td class="price"></td>
		<td class="change"></td>
	</tr>

</table>
</body>
</html>
